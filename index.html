<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My 暗記帳</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ホーム画面 -->
    <div id="home-view" class="view">
        <div class="container">
            <h1 class="app-title">My 暗記帳</h1>
            <div class="button-container">
                <button id="start-quiz-btn" class="primary-button">学習開始</button>
                <button id="show-list-btn" class="primary-button">一覧表示</button>
                <button id="settings-btn" class="primary-button">設定</button>
            </div>
        </div>
    </div>

    <!-- 単語カード追加画面 -->
    <div id="add-view" class="view hidden">
        <div class="nav-bar">
            <button id="cancel-add-btn" class="nav-button">キャンセル</button>
            <h2 class="nav-title">新規追加</h2>
            <button id="save-card-btn" class="nav-button">保存</button>
        </div>
        <div class="container">
            <div class="form-group">
                <label for="category-input">カテゴリ</label>
                <input type="text" id="category-input" class="input-field" placeholder="例: 英単語">
            </div>
            <div class="form-group">
                <label for="question-input">問題</label>
                <textarea id="question-input" class="input-field" rows="4" placeholder="例: apple"></textarea>
            </div>
            <div class="form-group">
                <label for="answer-input">解答</label>
                <textarea id="answer-input" class="input-field" rows="4" placeholder="例: りんご"></textarea>
            </div>
        </div>
    </div>

    <!-- 単語カード一覧画面 -->
    <div id="list-view" class="view hidden">
        <div class="nav-bar">
            <button id="back-from-list-btn" class="nav-button">戻る</button>
            <h2 class="nav-title">一覧</h2>
            <div class="nav-buttons-group">
                <button id="import-from-list-btn" class="nav-button">インポート</button>
                <button id="add-from-list-btn" class="nav-button">追加</button>
            </div>
        </div>
        <div class="container">
            <div id="card-list"></div>
        </div>
    </div>

    <!-- 学習画面 -->
    <div id="quiz-view" class="view hidden">
        <div class="nav-bar">
            <button id="quit-quiz-btn" class="nav-button">終了</button>
            <h2 class="nav-title">学習中</h2>
            <div class="nav-button"></div>
        </div>
        <div class="container quiz-container">
            <div class="category-label" id="quiz-category"></div>
            <div class="card-display">
                <div class="question-area">
                    <h3>問題</h3>
                    <div id="question-text" class="text-display"></div>
                </div>
                <div class="answer-area hidden" id="answer-area">
                    <h3>解答</h3>
                    <div id="answer-text" class="text-display"></div>
                </div>
            </div>
            <button id="quiz-action-btn" class="primary-button">答えを表示</button>
        </div>
    </div>

    <!-- 完了画面 -->
    <div id="completion-view" class="view hidden">
        <div class="container">
            <h1 class="completion-title">完了!</h1>
            <p class="completion-message">お疲れ様でした</p>
            <button id="back-to-home-btn" class="primary-button">ホームに戻る</button>
        </div>
    </div>

    <!-- 画像インポート画面 -->
    <div id="import-view" class="view hidden">
        <div class="nav-bar">
            <button id="cancel-import-btn" class="nav-button">キャンセル</button>
            <h2 class="nav-title">画像インポート</h2>
            <div class="nav-button"></div>
        </div>
        <div class="container">
            <div class="form-group">
                <label for="import-category-input">カテゴリ</label>
                <input type="text" id="import-category-input" class="input-field" placeholder="例: 英単語" value="英単語">
            </div>
            <div class="form-group">
                <label for="image-input">画像を選択</label>
                <input type="file" id="image-input" accept="image/*" class="input-field" aria-label="画像ファイルを選択">
            </div>
            <div class="form-group">
                <canvas id="preview-canvas" style="max-width: 100%; border: 1px solid #ccc; display: none;"></canvas>
            </div>
            <div class="form-group">
                <button id="process-image-btn" class="primary-button" disabled>赤字を抽出してインポート</button>
            </div>
            <div id="import-status" class="import-status"></div>
            <div id="import-preview" class="import-preview"></div>
        </div>
    </div>

    <!-- 設定画面 -->
    <div id="settings-view" class="view hidden">
        <div class="nav-bar">
            <button id="back-from-settings-btn" class="nav-button">戻る</button>
            <h2 class="nav-title">設定</h2>
            <div class="nav-button"></div>
        </div>
        <div class="container">
            <div class="form-group">
                <label for="gemini-api-key-input">Gemini API Key</label>
                <input type="password" id="gemini-api-key-input" class="input-field" placeholder="AIza...">
                <p style="font-size: 12px; color: #666; margin-top: 5px;">
                    Gemini APIキーは<a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #4285f4;">Google AI Studio</a>で取得できます
                </p>
                <div style="margin-top: 10px; padding: 10px; background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 4px;">
                    <p style="font-size: 12px; color: #856404; margin: 0;">
                        <strong>⚠️ セキュリティに関する注意</strong><br>
                        API Keyはブラウザのローカルストレージに保存されます。共有PCや公共のPCでは使用しないでください。
                    </p>
                </div>
                <div style="margin-top: 10px; padding: 10px; background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px;">
                    <p style="font-size: 12px; color: #721c24; margin: 0;">
                        <strong>🔒 セキュリティ警告</strong><br>
                        このアプリはクライアントサイドのみで動作し、API Keyは暗号化されずに保存されます。本番環境や機密性の高い用途には使用しないでください。XSS攻撃のリスクがあるため、信頼できる環境でのみ使用してください。
                    </p>
                </div>
            </div>
            <div class="form-group">
                <button id="save-settings-btn" class="primary-button">保存</button>
                <button id="clear-api-key-btn" class="primary-button" style="background-color: #dc3545; margin-left: 10px;">API Keyをクリア</button>
            </div>
            <div id="settings-status" style="margin-top: 10px; color: #4caf50;"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
