# My 暗記帳

フラッシュカード形式で学習できるWebアプリケーション

## 使い方

1. `index.html` をブラウザで開く
2. 「設定」からGemini API Keyを設定（画像インポート機能を使う場合）
3. 「一覧表示」→「追加」から単語カードを手動登録、または「インポート」から画像をアップロード
4. 「学習開始」でランダムに出題される問題を学習

## 機能

- ✅ ホーム画面
- ✅ 単語カード追加機能
- ✅ 単語カード一覧表示（カテゴリ別）
- ✅ 単語カード削除機能
- ✅ ランダム出題による学習モード
- ✅ 上付き・下付き文字サポート（例: `x^2`, `H_2O`）
- ✅ ローカルストレージでのデータ永続化
- ✅ 画像からの赤字抽出インポート機能（Gemini Vision API使用）

## 画像インポート機能のセットアップ

画像から単語カードをインポートする機能を使うには、Gemini API Keyが必要です。

### 1. Gemini API Keyの取得

1. [Google AI Studio](https://aistudio.google.com/app/apikey) にアクセス
2. Googleアカウントでログイン
3. 「Create API Key」をクリックしてAPI Keyを生成
4. 生成されたAPI Key（`AIza`で始まる39文字の文字列）をコピー

### 2. API Keyの設定

1. アプリのホーム画面で「設定」ボタンをクリック
2. Gemini API Keyの入力欄に取得したAPI Keyを貼り付け
3. 「保存」ボタンをクリック

#### API Keyの削除

不要になった場合や共有PCで使用した後は、以下の手順でAPI Keyを削除できます：

1. 設定画面で「API Keyをクリア」ボタンをクリック
2. 確認ダイアログで「OK」をクリック
3. API Keyがローカルストレージから完全に削除されます
4. 必要に応じて [Google AI Studio](https://aistudio.google.com/app/apikey) でAPI Keyを無効化してください

### 3. 画像のインポート

1. 「一覧表示」→「インポート」をクリック
2. カテゴリ名を入力（デフォルトは「英単語」）
3. 赤字が含まれる画像を選択
4. 「赤字を抽出してインポート」ボタンをクリック
5. 認識されたカードを確認・編集して保存

### セキュリティに関する注意事項

⚠️ **重要**: API Keyはブラウザのローカルストレージに保存されます。以下の点に注意してください：

- 共有PCや公共のPCでは使用しないでください
- 信頼できるデバイスでのみAPI Keyを保存してください
- API Keyを他人と共有しないでください
- 不要になったらAPI Keyを削除し、Google AI Studioで無効化してください

### API使用料金について

Gemini APIには無料枠があります：
- Gemini 1.5 Flash: 1日あたり1,500リクエストまで無料
- 詳細は [Google AI Pricing](https://ai.google.dev/pricing) を参照

本アプリは画像1枚につき1リクエストを使用します。

### トラブルシューティング

画像インポート時にエラーが発生した場合：

**「API Keyが無効です」エラー**
- 設定画面でAPI Keyが正しく入力されているか確認してください
- Google AI StudioでAPI Keyが有効になっているか確認してください

**「APIのリクエスト上限に達しました」エラー**
- 1日のリクエスト数が上限（1,500回）に達しています
- 翌日まで待つか、Google AI Studioで有料プランを検討してください

**「赤字のテキストが見つかりませんでした」エラー**
- 画像に赤字が含まれているか確認してください
- 画像の解像度が十分か確認してください（推奨: 最低でも800x600以上）

**「Gemini APIからのレスポンスの解析に失敗しました」エラー**
- インターネット接続を確認してください
- しばらく時間をおいてから再度お試しください

## データ形式

```javascript
{
  category: String,  // カテゴリ名
  question: String,  // 問題文
  answer: String     // 解答文
}
```

## 詳細仕様

詳細な仕様については [docs/wordlist-specification.md](docs/wordlist-specification.md) を参照してください。
